---
layout: default
title: Transit Map
permalink: project/mapbox/
---
<div> <h3><a href="/project"> Back to Dashboard </a></h3> </div>
<div id="map" style="width: 100%; height: 600px;"></div>

<link href='https://api.mapbox.com/mapbox-gl-js/v3.14.0/mapbox-gl.css' rel='stylesheet' />
<script src='https://api.mapbox.com/mapbox-gl-js/v3.14.0/mapbox-gl.js'></script>

<script>
mapboxgl.accessToken = 'pk.eyJ1IjoiamdvYmF0MTMiLCJhIjoiY21nMnVtcTh6MTQ4bDJrb2puczF6dWoyeCJ9.6hqHyL74X4bJhjYJXvo9WQ';

var map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/jgobat13/cmidr44cy007r01r985yx1icu', // Your style URL with layers
    center: [-122.3328 , 47.6061], // Adjust to your area
    zoom: 10
});

 map.on('load', function() {
    var ROUTES_LAYER = 'countytransitroutes-8xcf4w';
    var STOPS_LAYER = 'countytransitstops-9twlwi';
    var POLYGONS_LAYER = 'demographicsmapbox-09rq1x';
    
        var featureInfo = document.getElementById('feature-info');
    
    // Change cursor on hover
    map.on('mouseenter', ROUTES_LAYER, function() {
        map.getCanvas().style.cursor = 'pointer';
    });
    map.on('mouseleave', ROUTES_LAYER, function() {
        map.getCanvas().style.cursor = '';
    });
    
    map.on('mouseenter', STOPS_LAYER, function() {
        map.getCanvas().style.cursor = 'pointer';
    });
    map.on('mouseleave', STOPS_LAYER, function() {
        map.getCanvas().style.cursor = '';
    });
    
    map.on('mouseenter', POLYGONS_LAYER, function() {
        map.getCanvas().style.cursor = 'pointer';
    });
    map.on('mouseleave', POLYGONS_LAYER, function() {
        map.getCanvas().style.cursor = '';
    });
    
    // TRANSIT ROUTES - Click
    map.on('click', ROUTES_LAYER, function(e) {
        var props = e.features[0].properties;
        
        var routeHTML = '<div style="margin-top: 10px;">' +
                        '<h4 style="margin-top: 0; color: #2c5282;">Transit Route</h4>' +
                        '<strong>Agency:</strong> ' + (props.agency_name || 'N/A') + '<br>' +
                        '<strong>Route:</strong> ' + (props.route_long_name || 'N/A') + '<br>' +
                        '<strong>Route Desc:</strong> ' + (props.route_desc || 'N/A') + '<br>' +
                        '<strong>Route Line:</strong> ' + (props.route_short_name || 'N/A') + '<br>';
        
        if (props.route_url) {
            routeHTML += '<strong>URL:</strong> <a href="' + props.route_url + '" target="_blank">More Info</a><br>';
        }
        
        routeHTML += '</div>';
        
        featureInfo.innerHTML = routeHTML;
    });
    
    // TRANSIT STOPS - Click
    map.on('click', STOPS_LAYER, function(e) {
        var props = e.features[0].properties;
        
        var stopHTML = '<div style="margin-top: 10px;">' +
                       '<h4 style="margin-top: 0; color: #2c5282;">Transit Stop</h4>' +
                       '<strong>Stop Name:</strong> ' + (props.stop_name || props.Stop_Name || 'N/A') + '<br>' +
                       '</div>';
        
        featureInfo.innerHTML = stopHTML;
    });
    
    // DEMOGRAPHIC POLYGONS - Click
    map.on('click', POLYGONS_LAYER, function(e) {
        var props = e.features[0].properties;
        
        var censusHTML = '<div style="margin-top: 10px;">' +
                        '<h4 style="margin-top: 0; color: #2c5282;">Census Tract</h4>';
        
        for (var key in props) {
            if (props.hasOwnProperty(key)) {
                censusHTML += '<strong>' + key + ':</strong> ' + props[key] + '<br>';
            }
        }
        
        censusHTML += '</div>';
        
        featureInfo.innerHTML = censusHTML;
    });
});
</script>
